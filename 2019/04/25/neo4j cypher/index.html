<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="创建简单创建一个节点1234567create(    dis:Disease&amp;#123;        oid: &amp;quot;xxx1&amp;quot;,        code: &amp;quot;111&amp;quot;,        name: &amp;quot;2hh&amp;quot;    &amp;#125;) 注意：create也可以和return搭配，直接返回结果。 当然，create也可以同时创建多个关系： 1c">
<meta name="keywords" content="cypher,图数据库">
<meta property="og:type" content="article">
<meta property="og:title" content="neo4j cypher语法详细记录">
<meta property="og:url" content="http://yoursite.com/2019/04/25/neo4j cypher/index.html">
<meta property="og:site_name" content="静坐听雨，无问西东">
<meta property="og:description" content="创建简单创建一个节点1234567create(    dis:Disease&amp;#123;        oid: &amp;quot;xxx1&amp;quot;,        code: &amp;quot;111&amp;quot;,        name: &amp;quot;2hh&amp;quot;    &amp;#125;) 注意：create也可以和return搭配，直接返回结果。 当然，create也可以同时创建多个关系： 1c">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/1556109450937.png">
<meta property="og:image" content="http://yoursite.com/images/1556109996174.png">
<meta property="og:image" content="http://yoursite.com/images/1556157703013.png">
<meta property="og:image" content="http://yoursite.com/images/1556158342560.png">
<meta property="og:image" content="http://yoursite.com/images/1556158853492.png">
<meta property="og:image" content="http://yoursite.com/images/1556158991846.png">
<meta property="og:image" content="http://yoursite.com/images/1556173756584.png">
<meta property="og:image" content="http://yoursite.com/images/1556174002930.png">
<meta property="og:image" content="http://yoursite.com/images/1556097020998.png">
<meta property="og:image" content="http://yoursite.com/images/1556097489491.png">
<meta property="og:image" content="http://yoursite.com/images/1556110693577.png">
<meta property="og:image" content="http://yoursite.com/images/1556110757496.png">
<meta property="og:image" content="http://yoursite.com/images/1556110801946.png">
<meta property="og:image" content="http://yoursite.com/images/1556178449714.png">
<meta property="og:image" content="http://yoursite.com/images/1556179004984.png">
<meta property="og:image" content="http://yoursite.com/images/1556179612690.png">
<meta property="og:image" content="http://yoursite.com/images/1556179742301.png">
<meta property="og:image" content="http://yoursite.com/images/1556179991464.png">
<meta property="og:image" content="http://yoursite.com/images/1556171191956.png">
<meta property="og:image" content="http://yoursite.com/images/1556171363861.png">
<meta property="og:image" content="http://yoursite.com/images/1556171447596.png">
<meta property="og:image" content="http://yoursite.com/images/1556171507814.png">
<meta property="og:image" content="http://yoursite.com/images/1556171653801.png">
<meta property="og:image" content="http://yoursite.com/images/1556171925199.png">
<meta property="og:image" content="http://yoursite.com/images/1556161640403.png">
<meta property="og:image" content="http://yoursite.com/images/1556162025575.png">
<meta property="og:image" content="http://yoursite.com/images/1556162763349.png">
<meta property="og:image" content="http://yoursite.com/images/1556162877411.png">
<meta property="og:image" content="http://yoursite.com/images/1556168518463.png">
<meta property="og:image" content="http://yoursite.com/images/1556168670428.png">
<meta property="og:image" content="http://yoursite.com/images/1556168765421.png">
<meta property="og:image" content="http://yoursite.com/images/1556168890790.png">
<meta property="og:image" content="http://yoursite.com/images/1556168959169.png">
<meta property="og:image" content="http://yoursite.com/images/1556169249683.png">
<meta property="og:image" content="http://yoursite.com/images/1556169375890.png">
<meta property="og:image" content="http://yoursite.com/images/1556177576799.png">
<meta property="og:image" content="http://yoursite.com/images/1556177662110.png">
<meta property="og:image" content="http://yoursite.com/images/1556182254519.png">
<meta property="og:image" content="http://yoursite.com/images/1556182626360.png">
<meta property="og:image" content="http://yoursite.com/images/1556182661375.png">
<meta property="og:updated_time" content="2019-04-25T09:10:49.571Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="neo4j cypher语法详细记录">
<meta name="twitter:description" content="创建简单创建一个节点1234567create(    dis:Disease&amp;#123;        oid: &amp;quot;xxx1&amp;quot;,        code: &amp;quot;111&amp;quot;,        name: &amp;quot;2hh&amp;quot;    &amp;#125;) 注意：create也可以和return搭配，直接返回结果。 当然，create也可以同时创建多个关系： 1c">
<meta name="twitter:image" content="http://yoursite.com/images/1556109450937.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/04/25/neo4j cypher/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>neo4j cypher语法详细记录 | 静坐听雨，无问西东</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">静坐听雨，无问西东</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/25/neo4j cypher/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jaster">
      <meta itemprop="description" content="冲击大厂，加油！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="静坐听雨，无问西东">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">neo4j cypher语法详细记录

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-25 17:10:49" itemprop="dateCreated datePublished" datetime="2019-04-25T17:10:49+08:00">2019-04-25</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/neo4j/" itemprop="url" rel="index"><span itemprop="name">neo4j</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><h3 id="简单创建一个节点"><a href="#简单创建一个节点" class="headerlink" title="简单创建一个节点"></a>简单创建一个节点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create(</span><br><span class="line">    dis:Disease&#123;</span><br><span class="line">        oid: &quot;xxx1&quot;,</span><br><span class="line">        code: &quot;111&quot;,</span><br><span class="line">        name: &quot;2hh&quot;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>注意：create也可以和return搭配，直接返回结果。</p>
<p>当然，<code>create</code>也可以同时创建多个关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create (m),(s)</span><br></pre></td></tr></table></figure>
<h3 id="简单的创建一个关系线"><a href="#简单的创建一个关系线" class="headerlink" title="简单的创建一个关系线"></a>简单的创建一个关系线</h3><p>比如已经有了两个节点，我们想关联上关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">match(</span><br><span class="line">    a: Disease</span><br><span class="line">), (</span><br><span class="line">    b: Disease</span><br><span class="line">)</span><br><span class="line">where a.code=&quot;111&quot; and b.code=&quot;d1&quot;</span><br><span class="line">create (a)-[r:type]-&gt;(b)</span><br><span class="line">return *</span><br></pre></td></tr></table></figure>
<p>如果我们想给这个线设置一些属性，也没什么问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">match(</span><br><span class="line">    a: Disease&#123;</span><br><span class="line">       code: &apos;111&apos; </span><br><span class="line">    &#125;</span><br><span class="line">), (</span><br><span class="line">    b: Disease&#123;</span><br><span class="line">        code: &apos;d1&apos;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">create(a) -[r:relation&#123;name : a.name + &apos;--&apos; + b.name&#125;]-&gt;(b)</span><br><span class="line">return type(r), r.name</span><br></pre></td></tr></table></figure>
<p>这样查出来的结果是：<br><img src="/images/1556109450937.png" alt="Alt text"><br>可以看到，我们成功的设置了<code>r.name</code>.</p>
<p>当然，刚才我们是假设节点已经存在的情况，当然也可以假设不存在节点，直接创建节点+关系了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create p=(reba:Person&#123;name: &apos;reba&apos;&#125;)-[:WORK_AT]-&gt;(nazha:Person&#123;name:&apos;nazha&apos;&#125;)&lt;-[:WORK_AT]-(jt:Person&#123;name: &apos;jt&apos;&#125;)</span><br><span class="line">return p</span><br></pre></td></tr></table></figure>
<p>成功图如下：<br><img src="/images/1556109996174.png" alt="Alt text"></p>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><h3 id="清空数据库（慎用）"><a href="#清空数据库（慎用）" class="headerlink" title="清空数据库（慎用）"></a>清空数据库（慎用）</h3><p>对于节点比较少的可以使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match (n) detach delete n</span><br></pre></td></tr></table></figure>
<p>对于节点比较多的：<br>1、停掉服务；<br>2、删除 graph.db 目录；<br>3、重启服务。</p>
<h3 id="delete-删除节点和关系"><a href="#delete-删除节点和关系" class="headerlink" title="delete 删除节点和关系"></a>delete 删除节点和关系</h3><p>首先不删除干净连接的节点和关系是不能删除一个节点的。</p>
<p>比如首先有这个图：<br><img src="/images/1556157703013.png" alt="Alt text"></p>
<p>可见它是没有清除干净关系的，现在我们想删除它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;name:&apos;jt&apos;&#125;) delete p</span><br></pre></td></tr></table></figure>
<p>执行的时候发现报<code>Neo.ClientError.Schema.ConstraintValidationFailed</code>的错。</p>
<p>我们找一个没有任何连接关系的进行删除，就没毛病了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;id:124&#125;) delete p</span><br></pre></td></tr></table></figure>
<p>还有一种方式，就是删除一个节点，连带着它的关系全部删除，刚刚上面这种执行错误的，加一个<code>detach</code>关键字即可解决。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;</span><br><span class="line">    name: &apos;jt&apos;</span><br><span class="line">&#125;)</span><br><span class="line">detach delete p</span><br></pre></td></tr></table></figure>
<p>还有一种情况，我们只想删除关系，该怎么办？当然也是能够解决的：<br>我们现在有这样一个关系图：<br><img src="/images/1556158342560.png" alt="Alt text"></p>
<p>想把他们之间的关系删除掉，该怎么办？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;name: &quot;reba&quot;&#125;)-[r:WORK_AT]-&gt;() delete r</span><br></pre></td></tr></table></figure>
<p>这样就能够把两者之间的关系给删除掉了！</p>
<h3 id="remove-删除节点和关系中的属性字段"><a href="#remove-删除节点和关系中的属性字段" class="headerlink" title="remove 删除节点和关系中的属性字段"></a>remove 删除节点和关系中的属性字段</h3><p>首先我们有这样一个节点：<br><img src="/images/1556158853492.png" alt="Alt text"></p>
<p>属性为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;诊断&quot;,</span><br><span class="line">  &quot;code&quot;: &quot;d1&quot;,</span><br><span class="line">  &quot;oid&quot;: &quot;xxx1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用下面这段代码直接进行删除属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(d:Disease&#123;name:&quot;诊断&quot;&#125;)</span><br><span class="line">remove d.code</span><br><span class="line">return d.name, d.oid, d.code</span><br></pre></td></tr></table></figure></p>
<p>结果变成：<br><img src="/images/1556158991846.png" alt="Alt text"></p>
<p>除了删除属性，我们还能删除<code>label</code>，什么是label呢？其实就是类名，比如用下面这段话，把刚刚<code>诊断</code>的类删掉：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(d:Disease&#123;name:&quot;诊断&quot;&#125;)</span><br><span class="line">remove d:Disease</span><br><span class="line">return d.name, d.oid, d.code</span><br></pre></td></tr></table></figure>
<h2 id="改（SET）"><a href="#改（SET）" class="headerlink" title="改（SET）"></a>改（SET）</h2><h3 id="修改-添加属性"><a href="#修改-添加属性" class="headerlink" title="修改/添加属性"></a>修改/添加属性</h3><p>最简单的进行修改一个属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(n &#123;name: &apos;Andy&apos;&#125;)</span><br><span class="line">set n.surname = &apos;Taylor&apos;</span><br><span class="line">return n.name, n.surname</span><br></pre></td></tr></table></figure>
<p>这里有一点需要注意的是，如果本身没有<code>surname</code> 这个属性，会自动增加属性。</p>
<p>还有一个高级写法，用到了<code>case when</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">match(n&#123;name: &apos;Andy&apos;&#125;)</span><br><span class="line">set(</span><br><span class="line">    case</span><br><span class="line">    when n.age = 36</span><br><span class="line">    then n End</span><br><span class="line">).wordIn = &apos;Malmo&apos;</span><br><span class="line">return n.name, n.wordIn</span><br></pre></td></tr></table></figure>
<p>这里 如果不满足<code>age=36</code> 便不会执行下面的语句，这样的话，返回的就是一个<code>null</code>，比如：<br><img src="/images/1556173756584.png" alt="Alt text"></p>
<h3 id="一次修改-添加多个属性"><a href="#一次修改-添加多个属性" class="headerlink" title="一次修改/添加多个属性"></a>一次修改/添加多个属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(n&#123;name: &apos;Peter&apos;&#125;)</span><br><span class="line">set n.a1= &apos;1&apos; , n.a2 = &apos;3&apos;</span><br><span class="line">return n</span><br></pre></td></tr></table></figure>
<h3 id="删除一个属性"><a href="#删除一个属性" class="headerlink" title="删除一个属性"></a>删除一个属性</h3><p>将这个属性置为<code>null</code>，就是删除一个属性，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n &#123; name: &apos;Andy&apos; &#125;)</span><br><span class="line">SET n.name = NULL RETURN n.name, n.age</span><br></pre></td></tr></table></figure></p>
<h3 id="删除所有的属性使用一个空的map和等号"><a href="#删除所有的属性使用一个空的map和等号" class="headerlink" title="删除所有的属性使用一个空的map和等号"></a>删除所有的属性使用一个空的map和等号</h3><p>这样即可删除节点所有的属性了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (p &#123; name: &apos;Peter&apos; &#125;)</span><br><span class="line">SET p = &#123; &#125;</span><br><span class="line">RETURN p.name, p.age</span><br></pre></td></tr></table></figure>
<h3 id="完全copy一个节点或者关系"><a href="#完全copy一个节点或者关系" class="headerlink" title="完全copy一个节点或者关系"></a>完全copy一个节点或者关系</h3><p>SET可用于将所有属性从一个节点或关系复制到另一个节点。这将删除复制到的节点或关系上的所有其他属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (at &#123; name: &apos;Andy&apos; &#125;),(pn &#123; name: &apos;Peter&apos; &#125;)</span><br><span class="line">set at = pn</span><br><span class="line">return at.name, at.age, at.hungry, pn.name, pn.age</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556174002930.png" alt="Alt text"></p>
<p>注意看两个参数！</p>
<h3 id="设置一个节点属性所有从map中"><a href="#设置一个节点属性所有从map中" class="headerlink" title="设置一个节点属性所有从map中"></a>设置一个节点属性所有从map中</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (p &#123; name: &apos;Peter&apos; &#125;)</span><br><span class="line">SET p = &#123; name: &apos;Peter Smith&apos;, position: &apos;Entrepreneur&apos; &#125;</span><br><span class="line">RETURN p.name, p.age, p.position</span><br></pre></td></tr></table></figure>
<p>请注意，这个操作会删除原来所有的节点！那有没有不删除所有的做法呢？当然有：</p>
<h3 id="设置一个节点所有属性，但是不覆盖原来的属性"><a href="#设置一个节点所有属性，但是不覆盖原来的属性" class="headerlink" title="设置一个节点所有属性，但是不覆盖原来的属性"></a>设置一个节点所有属性，但是不覆盖原来的属性</h3><p>其实和上面几乎一样，就是把<code>=</code>变成<code>+=</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match (p&#123;name: &apos;Peter&apos;&#125;)</span><br><span class="line">SET p += &#123; age: 38, hungry: TRUE , position: &apos;Entrepreneur&apos; &#125;</span><br><span class="line">RETURN p.name, p.age, p.hungry, p.position</span><br></pre></td></tr></table></figure>
<h3 id="修改类（label）"><a href="#修改类（label）" class="headerlink" title="修改类（label）"></a>修改类（label）</h3><p>修改一个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n &#123; name: &apos;Stefan&apos; &#125;)</span><br><span class="line">SET n:German</span><br><span class="line">RETURN n.name, labels(n) AS labels</span><br></pre></td></tr></table></figure></p>
<p>修改多个：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match(n&#123;name: &apos;Peter&apos;&#125;)</span><br><span class="line">set n:Swedish:Bossman</span><br><span class="line">return n.name, labels(n) as labels</span><br></pre></td></tr></table></figure>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="简单的查询一个节点"><a href="#简单的查询一个节点" class="headerlink" title="简单的查询一个节点"></a>简单的查询一个节点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">match(</span><br><span class="line">    d: Disease</span><br><span class="line">)</span><br><span class="line">return d</span><br></pre></td></tr></table></figure>
<h3 id="简单进行条件类型的查询"><a href="#简单进行条件类型的查询" class="headerlink" title="简单进行条件类型的查询"></a>简单进行条件类型的查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">match(</span><br><span class="line">    d: Disease&#123;</span><br><span class="line">        oid: &quot;xxx1&quot;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">return d</span><br></pre></td></tr></table></figure>
<h3 id="Return"><a href="#Return" class="headerlink" title="Return"></a>Return</h3><p>return 的作用是在match匹配上了以后，选择哪些返回，如果能确定返回的属性，尽量不要全部返回！</p>
<ul>
<li>Return的语法很简单，需要什么就返回什么，*表示返回所有的。</li>
</ul>
<p>比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH p =(a &#123; name: &apos;A&apos; &#125;)-[r]-&gt;(b)</span><br><span class="line">RETURN *</span><br></pre></td></tr></table></figure>
<p>返回的结果就是所有的可能性：<br><img src="/images/1556097020998.png" alt="Alt text"></p>
<ul>
<li>在<code>return</code>中，还可以像传统sql那样，通过as来改名：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a &#123; name: &apos;A&apos; &#125;)</span><br><span class="line">RETURN a.age AS SomethingTotallyDifferent</span><br></pre></td></tr></table></figure>
<ul>
<li>对于没有属性的会返回一个<code>null</code>，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">RETURN n.age</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>如果返回的两个结果，一个由age这个属性，一个没有，那么有的正常返回，没有的返回<code>null</code>。</p>
<ul>
<li>还可以像Java一样返回一个布尔运算，并且返回的是多个元素也支持：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a &#123; name: &apos;A&apos; &#125;)</span><br><span class="line">RETURN a.age &gt; 30, &quot;I&apos;m a literal&quot;,(a)--&gt;()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>返回的是：<br><img src="/images/1556097489491.png" alt="Alt text"></p>
<ul>
<li>当然你也可以和<code>DISTINCT</code>连着用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a &#123; name: &apos;A&apos; &#125;)--&gt;(b)</span><br><span class="line">RETURN DISTINCT b</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="OPTIONAL-MATCH"><a href="#OPTIONAL-MATCH" class="headerlink" title="OPTIONAL MATCH"></a>OPTIONAL MATCH</h3><p>这个和match差不多，区别在于当没有查到东西的时候，会返回一个<code>null</code></p>
<p>比如下面这句话：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;</span><br><span class="line">    name: &apos;reba&apos;</span><br><span class="line">&#125;)</span><br><span class="line">optional match (p) --&gt;(x)</span><br><span class="line">return x</span><br></pre></td></tr></table></figure></p>
<p>结果是：<br><img src="/images/1556110693577.png" alt="Alt text"></p>
<p>可见是有值的，但是如果我们把指向方向换一下，变成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">match(p:Person&#123;</span><br><span class="line">    name: &apos;reba&apos;</span><br><span class="line">&#125;)</span><br><span class="line">optional match (p) &lt;--(x)</span><br><span class="line">return x</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556110757496.png" alt="Alt text"></p>
<p>同样的，如果我们把<code>optional</code>去掉，结果是：<br><img src="/images/1556110801946.png" alt="Alt text"></p>
<h2 id="MERGE关键字"><a href="#MERGE关键字" class="headerlink" title="MERGE关键字"></a>MERGE关键字</h2><p>这个关键字基本上是把create和match合并到一起，先看一个最简单的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">merge (robert:Critic&#123;name: &apos;111&apos;&#125;)</span><br><span class="line">return robert, labels(robert)</span><br></pre></td></tr></table></figure>
<p>本身是不存在这个节点的，所以会直接创建，那么把这句话再执行一遍，发现此时的作用只是相当于<code>match</code>了。</p>
<p>当然也可以从已经存在的节点中获取值，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (person:Person)</span><br><span class="line">MERGE (city:City &#123; name: person.bornIn &#125;)</span><br><span class="line">RETURN person.name, person.bornIn, city</span><br></pre></td></tr></table></figure>
<p>从已经存在的节点中，获取一些属性值，然后进行复制。当然，这个操作可以是批量的！</p>
<p>比如此处的结果是：<br><img src="/images/1556178449714.png" alt="Alt text"></p>
<h3 id="on-create"><a href="#on-create" class="headerlink" title="on create"></a>on create</h3><p>这个实际上是一个限定条件，表达的是当创建的时候，才执行，不创建就不执行，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">merge (c:Critic&#123;name:&apos;1112&apos;&#125;)</span><br><span class="line">on create set c.create = timestamp()</span><br><span class="line">return c.name, c.create</span><br></pre></td></tr></table></figure>
<p>这个语句中，如果数据库中已经存在了一个<code>1112</code>那么就不会<code>set</code>值，同样，如果不存在，那么就会执行<code>set</code>后面的部分。</p>
<h3 id="on-match"><a href="#on-match" class="headerlink" title="on match"></a>on match</h3><p>这个命令和上述表达差不多，不同的是它是匹配上了就进行<code>set</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MERGE (person:Person)</span><br><span class="line">ON MATCH SET person.found = TRUE RETURN person.name, person.found</span><br></pre></td></tr></table></figure>
<p>当然也可以同时设置多个属性值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MERGE (person:Person)</span><br><span class="line">ON MATCH SET person.found = TRUE , person.lastAccessed = timestamp()</span><br><span class="line">RETURN person.name, person.found, person.lastAccessed</span><br></pre></td></tr></table></figure>
<h3 id="on-create-和on-match-合并"><a href="#on-create-和on-match-合并" class="headerlink" title="on create 和on match 合并"></a>on create 和on match 合并</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MERGE (keanu:Person &#123; name: &apos;Keanu Reeves&apos; &#125;)</span><br><span class="line">ON CREATE SET keanu.created = timestamp()</span><br><span class="line">ON MATCH SET keanu.lastSeen = timestamp()</span><br><span class="line">RETURN keanu.name, keanu.created, keanu.lastSeen</span><br></pre></td></tr></table></figure>
<p>现在数据库中是没有这个节点的，也就是说会进行创建，那么我们看看最后的结果：<br><img src="/images/1556179004984.png" alt="Alt text"></p>
<p>很明显<code>MATCH</code>后面的没有执行！</p>
<h3 id="Merge-relationships"><a href="#Merge-relationships" class="headerlink" title="Merge relationships"></a>Merge relationships</h3><p>MERGE 同样也能被用来<code>match</code>或者<code>create</code>关系。</p>
<p>比如已经存在两个节点，想给他们MERGE一下关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (charlie:Person &#123; name: &apos;Charlie Sheen&apos; &#125;),(wallStreet:Movie &#123; title: &apos;Wall Street&apos; &#125;)</span><br><span class="line">MERGE (charlie)-[r:ACTED_IN]-&gt;(wallStreet)</span><br><span class="line">RETURN charlie.name, type(r), wallStreet.title</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556179612690.png" alt="Alt text"></p>
<p>当然，我们也能够一下子处理多个关系，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (oliver:Person &#123; name: &apos;Oliver Stone&apos; &#125;),(reiner:Person &#123; name: &apos;Rob Reiner&apos; &#125;)</span><br><span class="line">MERGE (oliver)-[:DIRECTED]-&gt;(movie:Movie)&lt;-[:ACTED_IN]-(reiner)</span><br><span class="line">RETURN movie</span><br></pre></td></tr></table></figure>
<p>最后结果是：<br><img src="/images/1556179742301.png" alt="Alt text"></p>
<p>还可以创建一个无向的连接：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (charlie:Person &#123; name: &apos;Charlie Sheen&apos; &#125;),(oliver:Person &#123; name: &apos;Oliver Stone&apos; &#125;)</span><br><span class="line">MERGE (charlie)-[r:KNOWS]-(oliver)</span><br><span class="line">RETURN r</span><br></pre></td></tr></table></figure>
<h3 id="批量操作"><a href="#批量操作" class="headerlink" title="批量操作"></a>批量操作</h3><p>有一些批量操作的写法，能够帮助我们快速创建大量节点和关系，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MATCH (person:Person)</span><br><span class="line">MERGE (city:City &#123; name: person.bornIn &#125;)</span><br><span class="line">MERGE (person)-[r:BORN_IN]-&gt;(city)</span><br><span class="line">RETURN person.name, person.bornIn, city</span><br></pre></td></tr></table></figure>
<p>将所有<code>Person</code>中出生地和实际的城市直接挂钩！</p>
<p>最后结果是：<img src="/images/1556179991464.png" alt="Alt text"></p>
<p>上面这句话，我们还可以改写下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (person:Person)</span><br><span class="line">MERGE (person)-[r:BORN_IN]-&gt;(city:City &#123; name: person.bornIn &#125;)</span><br><span class="line">RETURN person.name, person.bornIn, city</span><br></pre></td></tr></table></figure>
<h2 id="限定条件WHERE"><a href="#限定条件WHERE" class="headerlink" title="限定条件WHERE"></a>限定条件WHERE</h2><p>首先我们有这样一张图：</p>
<p>对于<code>where</code>，没什么好讲的，和传统的sql中差不多：<br>比如下面这句话：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name = &apos;Peter&apos; XOR (n.age &lt; 30 AND n.name = &apos;Timothy&apos;) OR NOT (n.name = &apos;Timothy&apos; OR n.name = &apos;Peter&apos;)</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure></p>
<h3 id="对label进行过滤"><a href="#对label进行过滤" class="headerlink" title="对label进行过滤"></a>对label进行过滤</h3><p>下面这句话可以直接对label进行过滤：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n:Swedish</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure></p>
<h3 id="不固定属性的过滤"><a href="#不固定属性的过滤" class="headerlink" title="不固定属性的过滤"></a>不固定属性的过滤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with &apos;AGE&apos; as propname</span><br><span class="line">match (n)</span><br><span class="line">where n[toLower(propname)] &lt; 30</span><br><span class="line">return n.name, n.age</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556171191956.png" alt="Alt text"></p>
<h3 id="属性存在性校验"><a href="#属性存在性校验" class="headerlink" title="属性存在性校验"></a>属性存在性校验</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE exists(n.belt)</span><br><span class="line">RETURN n.name, n.belt</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556171363861.png" alt="Alt text"></p>
<h3 id="以xx字符串开头的写法"><a href="#以xx字符串开头的写法" class="headerlink" title="以xx字符串开头的写法"></a>以xx字符串开头的写法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name STARTS WITH &apos;Pet&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556171447596.png" alt="Alt text"></p>
<h3 id="以xx字符串结尾"><a href="#以xx字符串结尾" class="headerlink" title="以xx字符串结尾"></a>以xx字符串结尾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name ENDS WITH &apos;ter&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<h3 id="字符串包含"><a href="#字符串包含" class="headerlink" title="字符串包含"></a>字符串包含</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name CONTAINS &apos;ete&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556171507814.png" alt="Alt text"></p>
<h3 id="NOT-的使用"><a href="#NOT-的使用" class="headerlink" title="NOT 的使用"></a>NOT 的使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE NOT n.name ENDS WITH &apos;y&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<h3 id="正则表达式的使用"><a href="#正则表达式的使用" class="headerlink" title="正则表达式的使用"></a>正则表达式的使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name =~ &apos;Tim.*&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<p>还有一种不区分大小写的写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">WHERE n.name =~ &apos;(?i)AND.*&apos;</span><br><span class="line">RETURN n.name, n.age</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556171653801.png" alt="Alt text"></p>
<h3 id="根据null过滤"><a href="#根据null过滤" class="headerlink" title="根据null过滤"></a>根据null过滤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH (person)</span><br><span class="line">WHERE person.name = &apos;Peter&apos; AND person.belt IS NULL RETURN person.name, person.age, person.belt</span><br></pre></td></tr></table></figure>
<p>结果是：</p>
<p><img src="/images/1556171925199.png" alt="Alt text"></p>
<h2 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h2><p>首先记住，不能根据关系或者节点进行排序，只能根据属性！</p>
<p>然后看一个简单的写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">RETURN n.name, n.age</span><br><span class="line">ORDER BY n.age, n.name</span><br></pre></td></tr></table></figure>
<p>一般<code>order by</code>都是放在<code>return</code>后面</p>
<h2 id="SKIP"><a href="#SKIP" class="headerlink" title="SKIP"></a>SKIP</h2><p>从头开始跳过几个数据，一般在Order by 的后面，如果没有order by 就放在return后面：</p>
<p>来看一个稍微高级点的写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">RETURN n.name</span><br><span class="line">ORDER BY n.name</span><br><span class="line">SKIP toInteger(3*rand())+ 1</span><br></pre></td></tr></table></figure></p>
<h2 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h2><p>limit 一般是在最后了，控制展示的个数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n)</span><br><span class="line">RETURN n.name</span><br><span class="line">ORDER BY n.name</span><br><span class="line">LIMIT toInteger(3 * rand())+ 1</span><br></pre></td></tr></table></figure>
<h2 id="WITH"><a href="#WITH" class="headerlink" title="WITH"></a>WITH</h2><p>假设现在有这样一张图：<br><img src="/images/1556161640403.png" alt="Alt text"></p>
<h3 id="对聚合函数结果进行筛选"><a href="#对聚合函数结果进行筛选" class="headerlink" title="对聚合函数结果进行筛选"></a>对聚合函数结果进行筛选</h3><p>我们用这样一段话，来查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">match(David&#123;name: &apos;David&apos;&#125;) --(otherPerson)--&gt;()</span><br><span class="line">with otherPerson, count(*) as cnt</span><br><span class="line">where cnt &gt; 1</span><br><span class="line">return otherPerson.name</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556162025575.png" alt="Alt text"></p>
<p>这句话表达的是<code>David</code>连接过去的节点，它向外连接关系大于1的那个节点。<br>所以很明显，就是<code>Anders</code>。</p>
<p>同理，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">match(Anders&#123;name: &apos;Anders&apos;&#125;) --(otherPerson)--&gt;()</span><br><span class="line">with otherPerson, count(*) as cnt</span><br><span class="line">where cnt &gt; 1</span><br><span class="line">return otherPerson.name</span><br></pre></td></tr></table></figure>
<p>这个结果很明显就是<code>Bossman</code>了。</p>
<h3 id="在使用collect之前对结果进行排序"><a href="#在使用collect之前对结果进行排序" class="headerlink" title="在使用collect之前对结果进行排序"></a>在使用collect之前对结果进行排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">match(n)</span><br><span class="line">with n</span><br><span class="line">where n.name = &apos;David&apos; or n.name = &apos;Bossman&apos;</span><br><span class="line">return collect(n.name)</span><br></pre></td></tr></table></figure>
<p>结果是：<img src="/images/1556162763349.png" alt="Alt text"></p>
<h3 id="限制搜索路径分支"><a href="#限制搜索路径分支" class="headerlink" title="限制搜索路径分支"></a>限制搜索路径分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n &#123; name: &apos;Anders&apos; &#125;)--(m)</span><br><span class="line">WITH m</span><br><span class="line">ORDER BY m.name DESC LIMIT 1</span><br><span class="line">MATCH (m)--(o)</span><br><span class="line">RETURN o.name</span><br></pre></td></tr></table></figure>
<p>最后结果是：<br><img src="/images/1556162877411.png" alt="Alt text"></p>
<p>总结一下，<code>With</code>关键字是连接多个查询的结果，即将上一个查询的结果用作下一个查询的开始。 </p>
<h2 id="unwind"><a href="#unwind" class="headerlink" title="unwind"></a>unwind</h2><h3 id="unwinding-a-list"><a href="#unwinding-a-list" class="headerlink" title="unwinding a list"></a>unwinding a list</h3><p>我们先看这样一句话，初步了解下<code>unwind</code> 的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unwind [1, 2, 3, NULL] as x</span><br><span class="line">return x, &apos;val&apos; as y</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556168518463.png" alt="Alt text"></p>
<h3 id="creating-a-distinct-list"><a href="#creating-a-distinct-list" class="headerlink" title="creating a distinct list"></a>creating a distinct list</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with [1, 1, 2, 2] as coll</span><br><span class="line">unwind coll as x</span><br><span class="line">with distinct x</span><br><span class="line">return collect(x) as setOfVals</span><br></pre></td></tr></table></figure>
<p>结果是：<br><img src="/images/1556168670428.png" alt="Alt text"></p>
<h3 id="Using-UNWIND-with-any-expression-returning-a-list"><a href="#Using-UNWIND-with-any-expression-returning-a-list" class="headerlink" title="Using UNWIND with any expression returning a list"></a>Using UNWIND with any expression returning a list</h3><p>其实是在合并列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with [1, 2] as a, [3, 4] as b</span><br><span class="line">unwind (a + b) as x</span><br><span class="line">return x</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/1556168765421.png" alt="Alt text"></p>
<h3 id="Using-UNWIND-with-a-list-of-lists"><a href="#Using-UNWIND-with-a-list-of-lists" class="headerlink" title="Using UNWIND with a list of lists"></a>Using UNWIND with a list of lists</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with [[1, 2], [3, 4], 5] as nested</span><br><span class="line">unwind nested as x</span><br><span class="line">unwind x as y</span><br><span class="line">return x, y</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556168890790.png" alt="Alt text"></p>
<h3 id="Using-UNWIND-with-an-empty-list"><a href="#Using-UNWIND-with-an-empty-list" class="headerlink" title="Using UNWIND with an empty list"></a>Using UNWIND with an empty list</h3><p>这是一个用法，只要<code>unwind</code>的是一个<code>[]</code>，那么不管一起返回的是什么，都会返回一个<code>0rows</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unwind [] as empty</span><br><span class="line">return empty, &apos;literal_that_is_not_returned&apos;</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556168959169.png" alt="Alt text"></p>
<h3 id="Using-UNWIND-with-an-expression-that-is-not-a-list"><a href="#Using-UNWIND-with-an-expression-that-is-not-a-list" class="headerlink" title="Using UNWIND with an expression that is not a list"></a>Using UNWIND with an expression that is not a list</h3><p><code>unwind</code>可以被用来检测是不是一个list</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unwind null as x</span><br><span class="line">return x, &apos;some_itearl&apos;</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556169249683.png" alt="Alt text"></p>
<p>如果我们直接unwind一个数字，会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unwind 5 as x</span><br><span class="line">return x, &apos;11&apos;</span><br></pre></td></tr></table></figure>
<p><img src="/images/1556169375890.png" alt="Alt text"></p>
<h2 id="FOREACH"><a href="#FOREACH" class="headerlink" title="FOREACH"></a>FOREACH</h2><p>对于这样关系的一张图：<br><img src="/images/1556177576799.png" alt="Alt text"></p>
<p>下面这句话，可以批量的进行修改属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match p=(begin)-[*]-&gt;(END)</span><br><span class="line">where begin.name = &apos;A&apos; And END.name = &apos;D&apos;</span><br><span class="line">foreach(n in nodes(p)| set n.marked = TRUE)</span><br></pre></td></tr></table></figure></p>
<p>结果是：</p>
<p><img src="/images/1556177662110.png" alt="Alt text"></p>
<h2 id="CALL"><a href="#CALL" class="headerlink" title="CALL"></a>CALL</h2><p>使用CALL可以调用一些函数，比如来个最简单的调用一个库函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL `db`.`labels`</span><br></pre></td></tr></table></figure>
<p>这样子可以把我们的所有类名全部列出来：<br><img src="/images/1556182254519.png" alt="Alt text"></p>
<p>但这一部分一般用到的应当不多，不作详细介绍。</p>
<h2 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h2><p>union 就是把两个结果合并起来。</p>
<p>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:Actor)</span><br><span class="line">RETURN n.name AS name</span><br><span class="line">UNION ALL MATCH (n:Movie)</span><br><span class="line">RETURN n.title AS name</span><br></pre></td></tr></table></figure></p>
<p>这样子查出来的结果是：<br><img src="/images/1556182626360.png" alt="Alt text"></p>
<p>如果不用<code>union all</code>改直接用<code>union</code>呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:Actor)</span><br><span class="line">RETURN n.name AS name</span><br><span class="line">UNION</span><br><span class="line">MATCH (n:Movie)</span><br><span class="line">RETURN n.title AS name</span><br></pre></td></tr></table></figure>
<p>结果是：</p>
<p><img src="/images/1556182661375.png" alt="Alt text"></p>
<p>相当于取了个重</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/cypher/" rel="tag"># cypher</a>
          
            <a href="/tags/图数据库/" rel="tag"># 图数据库</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/24/详解常用类加载器：ContextClassLoader/" rel="next" title="详解常用类加载器：ContextClassLoader">
                <i class="fa fa-chevron-left"></i> 详解常用类加载器：ContextClassLoader
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jaster</p>
              <div class="site-description motion-element" itemprop="description">冲击大厂，加油！</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/jawhiow" title="GitHub &rarr; https://github.com/jawhiow" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建"><span class="nav-number">1.</span> <span class="nav-text">创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简单创建一个节点"><span class="nav-number">1.1.</span> <span class="nav-text">简单创建一个节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简单的创建一个关系线"><span class="nav-number">1.2.</span> <span class="nav-text">简单的创建一个关系线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除"><span class="nav-number">2.</span> <span class="nav-text">删除</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#清空数据库（慎用）"><span class="nav-number">2.1.</span> <span class="nav-text">清空数据库（慎用）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delete-删除节点和关系"><span class="nav-number">2.2.</span> <span class="nav-text">delete 删除节点和关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#remove-删除节点和关系中的属性字段"><span class="nav-number">2.3.</span> <span class="nav-text">remove 删除节点和关系中的属性字段</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改（SET）"><span class="nav-number">3.</span> <span class="nav-text">改（SET）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-添加属性"><span class="nav-number">3.1.</span> <span class="nav-text">修改/添加属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一次修改-添加多个属性"><span class="nav-number">3.2.</span> <span class="nav-text">一次修改/添加多个属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除一个属性"><span class="nav-number">3.3.</span> <span class="nav-text">删除一个属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除所有的属性使用一个空的map和等号"><span class="nav-number">3.4.</span> <span class="nav-text">删除所有的属性使用一个空的map和等号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#完全copy一个节点或者关系"><span class="nav-number">3.5.</span> <span class="nav-text">完全copy一个节点或者关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置一个节点属性所有从map中"><span class="nav-number">3.6.</span> <span class="nav-text">设置一个节点属性所有从map中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置一个节点所有属性，但是不覆盖原来的属性"><span class="nav-number">3.7.</span> <span class="nav-text">设置一个节点所有属性，但是不覆盖原来的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改类（label）"><span class="nav-number">3.8.</span> <span class="nav-text">修改类（label）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查询"><span class="nav-number">4.</span> <span class="nav-text">查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简单的查询一个节点"><span class="nav-number">4.1.</span> <span class="nav-text">简单的查询一个节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简单进行条件类型的查询"><span class="nav-number">4.2.</span> <span class="nav-text">简单进行条件类型的查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Return"><span class="nav-number">4.3.</span> <span class="nav-text">Return</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OPTIONAL-MATCH"><span class="nav-number">4.4.</span> <span class="nav-text">OPTIONAL MATCH</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MERGE关键字"><span class="nav-number">5.</span> <span class="nav-text">MERGE关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#on-create"><span class="nav-number">5.1.</span> <span class="nav-text">on create</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#on-match"><span class="nav-number">5.2.</span> <span class="nav-text">on match</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#on-create-和on-match-合并"><span class="nav-number">5.3.</span> <span class="nav-text">on create 和on match 合并</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Merge-relationships"><span class="nav-number">5.4.</span> <span class="nav-text">Merge relationships</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#批量操作"><span class="nav-number">5.5.</span> <span class="nav-text">批量操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#限定条件WHERE"><span class="nav-number">6.</span> <span class="nav-text">限定条件WHERE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#对label进行过滤"><span class="nav-number">6.1.</span> <span class="nav-text">对label进行过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不固定属性的过滤"><span class="nav-number">6.2.</span> <span class="nav-text">不固定属性的过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性存在性校验"><span class="nav-number">6.3.</span> <span class="nav-text">属性存在性校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以xx字符串开头的写法"><span class="nav-number">6.4.</span> <span class="nav-text">以xx字符串开头的写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以xx字符串结尾"><span class="nav-number">6.5.</span> <span class="nav-text">以xx字符串结尾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串包含"><span class="nav-number">6.6.</span> <span class="nav-text">字符串包含</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NOT-的使用"><span class="nav-number">6.7.</span> <span class="nav-text">NOT 的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则表达式的使用"><span class="nav-number">6.8.</span> <span class="nav-text">正则表达式的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#根据null过滤"><span class="nav-number">6.9.</span> <span class="nav-text">根据null过滤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ORDER-BY"><span class="nav-number">7.</span> <span class="nav-text">ORDER BY</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SKIP"><span class="nav-number">8.</span> <span class="nav-text">SKIP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LIMIT"><span class="nav-number">9.</span> <span class="nav-text">LIMIT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WITH"><span class="nav-number">10.</span> <span class="nav-text">WITH</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#对聚合函数结果进行筛选"><span class="nav-number">10.1.</span> <span class="nav-text">对聚合函数结果进行筛选</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在使用collect之前对结果进行排序"><span class="nav-number">10.2.</span> <span class="nav-text">在使用collect之前对结果进行排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#限制搜索路径分支"><span class="nav-number">10.3.</span> <span class="nav-text">限制搜索路径分支</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unwind"><span class="nav-number">11.</span> <span class="nav-text">unwind</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#unwinding-a-list"><span class="nav-number">11.1.</span> <span class="nav-text">unwinding a list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#creating-a-distinct-list"><span class="nav-number">11.2.</span> <span class="nav-text">creating a distinct list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-UNWIND-with-any-expression-returning-a-list"><span class="nav-number">11.3.</span> <span class="nav-text">Using UNWIND with any expression returning a list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-UNWIND-with-a-list-of-lists"><span class="nav-number">11.4.</span> <span class="nav-text">Using UNWIND with a list of lists</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-UNWIND-with-an-empty-list"><span class="nav-number">11.5.</span> <span class="nav-text">Using UNWIND with an empty list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-UNWIND-with-an-expression-that-is-not-a-list"><span class="nav-number">11.6.</span> <span class="nav-text">Using UNWIND with an expression that is not a list</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FOREACH"><span class="nav-number">12.</span> <span class="nav-text">FOREACH</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CALL"><span class="nav-number">13.</span> <span class="nav-text">CALL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UNION"><span class="nav-number">14.</span> <span class="nav-text">UNION</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jaster</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
